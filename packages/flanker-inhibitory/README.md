# flanker-inhibitory

## Overview

The Flanker Inhibitory Control and Attention test is an assessment of inhibitory control and selective attention based on the NIH Toolbox Flanker task. Participants respond to the direction of a central stimulus while ignoring flanking stimuli that may be congruent or incongruent with the target.

## Loading

### In browser

```html
<script src="https://unpkg.com/@jspsych-timelines/flanker-inhibitory"></script>
```

### Via NPM

```bash
npm install @jspsych-timelines/flanker-inhibitory
```

```js
import { createTimeline, timelineUnits, utils } from "@jspsych-timelines/flanker-inhibitory"
```

## Compatibility

`@jspsych-timelines/flanker-inhibitory` requires jsPsych v8.0.0 or later.

## Documentation

### createTimeline

#### jsPsychTimelineFlankerInhibitory.createTimeline(jsPsych, { *options* }) ⇒ <code>timeline</code>

Creates a complete flanker task timeline with instructions, practice trials, and main task trials. The task uses layered fish and arrow stimuli by default, with configurable parameters for customization.

The following parameters can be specified in the **options** parameter.

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| stimuli_type | string | 'layered' | Type of stimuli to use: 'fish', 'arrow', or 'layered' |
| custom_stimuli | object | undefined | Custom stimuli object with left/right arrays |
| svg | array | undefined | Override parameter - array of SVGs to layer (should be right-facing; left version auto-generated) |
| stimuli_amount | number | 5 | Number of stimuli in flanker display (must be odd ≥3) |
| fixation_duration | number | 500 | Duration of fixation cross in milliseconds |
| show_instructions | boolean | true | Whether to show instruction screens |
| show_practice | boolean | true | Whether to include practice trials |
| num_practice | number | 8 | Number of practice trials |
| num_trials | number | 20 | Number of main task trials |
| enable_tts | boolean | false | Enable text-to-speech functionality |
| tts_voice | string | '' | Voice name for TTS (empty uses default) |
| tts_rate | number | 1.0 | Speech rate (0.1 to 10) |
| tts_pitch | number | 1.0 | Speech pitch (0 to 2) |
| tts_volume | number | 1.0 | Speech volume (0 to 1) |
| tts_lang | string | 'en-US' | Language code for TTS |
| speak_instructions | boolean | true | Speak instruction page content |
| speak_prompts | boolean | true | Speak trial prompts |
| speak_feedback | boolean | true | Speak feedback messages |
| auto_speak | boolean | true | Auto-start speaking when content loads |

#### Example Usage

```js
const jsPsych = initJsPsych();

// Basic usage with defaults
const timeline = jsPsychTimelineFlankerInhibitory.createTimeline(jsPsych);

// Custom configuration
const customTimeline = jsPsychTimelineFlankerInhibitory.createTimeline(jsPsych, {
  stimuli_type: 'fish',
  stimuli_amount: 7,
  num_trials: 40,
  fixation_duration: 750
});

// Using custom SVG override (provide right-facing SVGs)
const svgTimeline = jsPsychTimelineFlankerInhibitory.createTimeline(jsPsych, {
  svg: [
    '<svg>...right-facing base layer...</svg>',
    '<svg>...right-facing overlay layer...</svg>'
  ],
  stimuli_amount: 9
  // Left-facing versions will be automatically generated by flipping
});

// With TTS enabled
const ttsTimeline = jsPsychTimelineFlankerInhibitory.createTimeline(jsPsych, {
  enable_tts: true,
  speak_instructions: true,
  speak_prompts: true,
  speak_feedback: true,
  tts_rate: 0.9,
  tts_lang: 'en-US'
});

jsPsych.run([timeline]);
```

### timelineUnits

Object containing identifiers for different phases of the task:
- `instructions`: Instruction screens
- `practice`: Practice trials  
- `main`: Main task trials
- `completion`: Task completion screen

### utils

Utility functions for working with flanker stimuli and data:
- `calculatePerformance(data)`: Calculate accuracy and mean RT from trial data
- `createFlankerStim(direction, congruent, stimuli, stimuli_amount)`: Generate flanker stimulus HTML
- `createPracticeStim(direction, congruent, stimuli, stimuli_amount)`: Generate practice stimulus with highlighting

## Features

- **Adaptive stimuli**: Fish stimuli for younger children, arrows for older children, or layered combinations
- **Configurable difficulty**: Adjust number of flanker stimuli (3, 5, 7, 9, etc.)
- **Mobile-friendly**: Touch-optimized button interfaces
- **Practice mode**: Highlighted center stimulus for learning
- **Multiple input types**: Support for SVG arrays, custom stimuli objects, or simple overrides
- **Automatic flipping**: Single right-facing SVG automatically generates left-facing version
- **Layered SVGs**: Stack multiple SVG elements for complex stimuli
- **Text-to-Speech**: Optional TTS support for accessibility and younger participants
- **Speech controls**: Space bar to skip speech, configurable voice settings

## Author / Citation

Hunter Farhat