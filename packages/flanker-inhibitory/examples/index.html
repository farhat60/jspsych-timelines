<!DOCTYPE html>
<html>

<head>
  <title>Flanker Inhibitory Control Task Example</title>
  <script src="https://unpkg.com/jspsych"></script>
  <script src="../dist/index.global.js"></script>
  <!-- Once this timeline package is published, it can be loaded via
<script src="https://unpkg.com/@jspsych-timelines/flanker-inhibitory"></script> -->
  <link rel="stylesheet" href="https://unpkg.com/jspsych/css/jspsych.css">
  <link rel="stylesheet" href="../src/styles.css">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8f9fa;
    }
  </style>
</head>

<body></body>
<script>
  // Initialize jsPsych
  const jsPsych = initJsPsych({
    on_finish: function() {
      // Display results when task is complete
      // const data = jsPsych.data.get().filter({task: 'flanker-trial', trial_type: 'test'});
      // const performance = jsPsychTimelineFlankerInhibitory.utils.calculatePerformance(data.values());
      
      console.log('Task Performance:', performance);
      
      // Optional: display CSV data
      // jsPsych.data.displayData();
    }
  });

  // Configure the task with ALL available parameters set to their defaults
  const config = {
    // ===== STIMULUS CONFIGURATION =====
    stimuli_type: 'layered', // 'fish', 'arrow', 'custom', or 'layered' (check stimuli.ts for details)
  //   svg: [
  //   '<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle cx="24" cy="24" r="15" fill="yellow"/></svg>',
  //   '<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">' +
  //   '<polygon points="38,24 18,10 18,38" fill="orange"/>' +
  //   '</svg>'
  // ], // Override parameter - array of SVGs to layer (should be right-facing)
    stimuli_amount: 5, // Number of stimuli in flanker display (must be odd â‰¥3)
    
    // ===== TIMING CONFIGURATION =====
    fixation_duration: 500, // Duration of fixation cross in milliseconds
    
    // ===== TASK FLOW CONFIGURATION =====
    show_instructions: true, // Whether to show instruction screens
    show_practice: true, // Whether to include practice trials
    num_practice: 3, // Number of practice trials
    num_trials: 20, // Number of main task trials
    
    // ===== TEXT-TO-SPEECH CONFIGURATION =====
    enable_tts: true, // Enable text-to-speech functionality
    tts_rate: 1.0, // Speech rate (0.1 to 10)
    tts_pitch: 1.0, // Speech pitch (0 to 2)
    tts_volume: 1.0, // Speech volume (0 to 1)
    tts_lang: 'ar-SA', // Language code for TTS
    speak_instructions: true, // Speak instruction page content
    speak_prompts: false, // Speak trial prompts
    speak_feedback: false, // Speak feedback messages
    auto_speak: true, // Auto-start speaking when content loads    
  };

  // Create the timeline
  const task = jsPsychTimelineFlankerInhibitory.createTimeline(jsPsych, config);

  // Custom stimuli with car example using svg override
  const task1 = jsPsychTimelineFlankerInhibitory.createTimeline(jsPsych, {
    svg: [
      // Custom car pointing right
      '<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">' +
      '<rect x="8" y="20" width="32" height="8" fill="red"/>' +
      '<circle cx="15" cy="32" r="4" fill="black"/>' +
      '<circle cx="33" cy="32" r="4" fill="black"/>' +
      '<polygon points="40,20 45,24 40,28" fill="red"/>' +
      '</svg>'
      // Left version will be auto-generated by flipping
    ],
    stimuli_amount: 5,
    num_practice: 0,
    num_trials: 16
  });

  // Using custom stimuli type (uses custom_stimulus from stimuli.ts)
  const customTypeExample = jsPsychTimelineFlankerInhibitory.createTimeline(jsPsych, {
    stimuli_type: 'custom',
    stimuli_amount: 7
  });

  // Layered SVG override (multiple SVG layers)
  const layeredCustom = jsPsychTimelineFlankerInhibitory.createTimeline(jsPsych, {
    svg: [
      // Base layer - circle
      '<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle cx="24" cy="24" r="15" fill="yellow"/></svg>',
      // Overlay layer - arrow
      '<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><polygon points="35,24 25,18 25,30" fill="black"/></svg>'
    ],
    stimuli_amount: 7
  });

  // Run the experiment
  jsPsych.run([task]);
</script>

</html>