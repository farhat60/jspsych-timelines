<!DOCTYPE html>
<html>

<head>
  <title>Flanker Inhibitory Control Task Example</title>
  <script src="https://unpkg.com/jspsych"></script>
  <script src="../dist/index.global.js"></script>
  <!-- Once this timeline package is published, it can be loaded via
<script src="https://unpkg.com/@jspsych-timelines/flanker-inhibitory"></script> -->
  <link rel="stylesheet" href="https://unpkg.com/jspsych/css/jspsych.css">
  <link rel="stylesheet" href="../src/styles.css">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8f9fa;
    }
  </style>
</head>

<body></body>
<script>
  // Initialize jsPsych
  const jsPsych = initJsPsych({
    on_finish: function() {
      // Display results when task is complete
      const data = jsPsych.data.get().filter({task: 'flanker-trial', trial_type: 'test'});
      const performance = jsPsychTimelineFlankerInhibitory.utils.calculatePerformance(data.values());
      
      console.log('Task Performance:', performance);
      
      // Optional: display CSV data
      // jsPsych.data.displayData();
    }
  });

  // Configure the task
  const config = {
    // Stimulus options
    stimuli_type: 'layered', // 'fish', 'arrow', or 'layered' (fish + arrow overlay)
    stimuli_amount: 8, // Number of stimuli in flanker display (3, 5, 7, 9, etc. - must be odd)
    
    // SVG override - uncomment to use custom SVG array
    // svg: [
    //   '<svg xmlns="http://www.w3.org/2000/svg" wi dth="48" height="48" viewBox="0 0 48 48"><circle cx="24" cy="24" r="20" fill="blue"/></svg>',
    //   '<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path d="M24 8 L32 24 L24 40 L16 24 Z" fill="red"/></svg>'
    // ],
    
    // Trial configuration  
    num_practice: 6, // Number of practice trials
    num_trials: 20, // Number of main task trials
    
    // Timing options (in milliseconds)
    fixation_duration: 500,
    
    // Task flow options
    show_instructions: true,
    show_practice: true
  };

  // Create the timeline
  const task = jsPsychTimelineFlankerInhibitory.createTimeline(jsPsych, config);

  // Alternative configurations (uncomment to try):
  
  // Simple fish-only with 3 stimuli
  // const simpleFish = jsPsychTimelineFlankerInhibitory.createTimeline(jsPsych, {
  //   stimuli_type: 'fish',
  //   stimuli_amount: 3,
  //   num_practice: 4,
  //   num_trials: 12
  // });

  // Complex arrow display with 9 stimuli
  // const complexArrows = jsPsychTimelineFlankerInhibitory.createTimeline(jsPsych, {
  //   stimuli_type: 'arrow', 
  //   stimuli_amount: 9,
  //   num_practice: 8,
  //   num_trials: 40
  // });

  // Custom SVG override
  // const customSVG = jsPsychTimelineFlankerInhibitory.createTimeline(jsPsych, {
  //   svg: ['<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><polygon points="24,4 44,40 4,40" fill="green"/></svg>'],
  //   stimuli_amount: 5
  // });

  // Run the experiment
  jsPsych.run([task]);
</script>

</html>